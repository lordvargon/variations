using Newtonsoft.Json;


class Program
    {
        static void Main()
        {
            //JSON array
            string jsonString = @"[
                {'FlavorOne':'Vanilla','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Rocky Road','FlavorThree':'Pistachio'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Orage','FlavorTwo':'Pistachio','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Orage','FlavorTwo':'Rocky Road','FlavorThree':'Orage'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Vanilla','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Vanilla','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Chocolate','FlavorTwo':'Orage','FlavorThree':'Pistachio'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pecan','FlavorTwo':'Pecan','FlavorThree':'Vanilla'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Chocolate','FlavorTwo':'Chocolate','FlavorThree':'Rocky Road'},{'FlavorOne':'Vanilla','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Vanilla','FlavorThree':'Vanilla'},{'FlavorOne':'Rocky Road','FlavorTwo':'Vanilla','FlavorThree':'Rocky Road'},{'FlavorOne':'Vanilla','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Orage','FlavorTwo':'Pistachio','FlavorThree':'Chocolate'},{'FlavorOne':'Chocolate','FlavorTwo':'Orage','FlavorThree':'Pistachio'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Pistachio','FlavorThree':'Vanilla'},{'FlavorOne':'Rocky Road','FlavorTwo':'Vanilla','FlavorThree':'Rocky Road'},{'FlavorOne':'Pistachio','FlavorTwo':'Rocky Road','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Rocky Road','FlavorThree':'Pistachio'},{'FlavorOne':'Orage','FlavorTwo':'Pistachio','FlavorThree':'Chocolate'},{'FlavorOne':'Pecan','FlavorTwo':'Pistachio','FlavorThree':'Rocky Road'},{'FlavorOne':'Vanilla','FlavorTwo':'Vanilla','FlavorThree':'Pecan'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Rocky Road','FlavorTwo':'Vanilla','FlavorThree':'Rocky Road'},{'FlavorOne':'Pistachio','FlavorTwo':'Pistachio','FlavorThree':'Vanilla'},{'FlavorOne':'Pistachio','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Rocky Road','FlavorTwo':'Vanilla','FlavorThree':'Rocky Road'},{'FlavorOne':'Orage','FlavorTwo':'Pistachio','FlavorThree':'Chocolate'},{'FlavorOne':'Orage','FlavorTwo':'Rocky Road','FlavorThree':'Orage'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Chocolate','FlavorTwo':'Orage','FlavorThree':'Pistachio'},{'FlavorOne':'Pecan','FlavorTwo':'Pecan','FlavorThree':'Vanilla'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Rocky Road','FlavorThree':'Pistachio'},{'FlavorOne':'Chocolate','FlavorTwo':'Chocolate','FlavorThree':'Rocky Road'},{'FlavorOne':'Pistachio','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Pecan','FlavorTwo':'Pistachio','FlavorThree':'Rocky Road'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Orage','FlavorTwo':'Pistachio','FlavorThree':'Chocolate'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Pecan','FlavorTwo':'Pecan','FlavorThree':'Vanilla'},{'FlavorOne':'Pecan','FlavorTwo':'Pecan','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pecan','FlavorTwo':'Pistachio','FlavorThree':'Rocky Road'},{'FlavorOne':'Pistachio','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Pecan','FlavorTwo':'Pistachio','FlavorThree':'Rocky Road'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pecan','FlavorTwo':'Pistachio','FlavorThree':'Rocky Road'},{'FlavorOne':'Vanilla','FlavorTwo':'Vanilla','FlavorThree':'Pecan'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Chocolate','FlavorTwo':'Chocolate','FlavorThree':'Rocky Road'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pecan','FlavorTwo':'Pecan','FlavorThree':'Vanilla'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Chocolate','FlavorTwo':'Orage','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pecan','FlavorTwo':'Pecan','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Vanilla','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Vanilla','FlavorThree':'Vanilla'},{'FlavorOne':'Pistachio','FlavorTwo':'Pistachio','FlavorThree':'Vanilla'},{'FlavorOne':'Orage','FlavorTwo':'Rocky Road','FlavorThree':'Orage'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Rocky Road','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Vanilla','FlavorThree':'Vanilla'},{'FlavorOne':'Pecan','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Pistachio','FlavorTwo':'Vanilla','FlavorThree':'Vanilla'},{'FlavorOne':'Orage','FlavorTwo':'Pistachio','FlavorThree':'Chocolate'},{'FlavorOne':'Chocolate','FlavorTwo':'Orage','FlavorThree':'Pistachio'},{'FlavorOne':'Pecan','FlavorTwo':'Pistachio','FlavorThree':'Rocky Road'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Chocolate','FlavorTwo':'Orage','FlavorThree':'Pistachio'},{'FlavorOne':'Pistachio','FlavorTwo':'Pistachio','FlavorThree':'Vanilla'},{'FlavorOne':'Chocolate','FlavorTwo':'Chocolate','FlavorThree':'Rocky Road'},{'FlavorOne':'Vanilla','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Orage','FlavorTwo':'Rocky Road','FlavorThree':'Orage'},{'FlavorOne':'Rocky Road','FlavorTwo':'Vanilla','FlavorThree':'Rocky Road'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Orage','FlavorTwo':'Rocky Road','FlavorThree':'Orage'},{'FlavorOne':'Pistachio','FlavorTwo':'Chocolate','FlavorThree':'Vanilla'},{'FlavorOne':'Vanilla','FlavorTwo':'Vanilla','FlavorThree':'Chocolate'},{'FlavorOne':'Orage','FlavorTwo':'Rocky Road','FlavorThree':'Orage'},{'FlavorOne':'Pistachio','FlavorTwo':'Orage','FlavorThree':'Chocolate'},{'FlavorOne':'Vanilla','FlavorTwo':'Chocolate','FlavorThree':'Pistachio'},{'FlavorOne':'Pecan','FlavorTwo':'Pistachio','FlavorThree':'Rocky Road'}
            ]";


        // Deserialize JSON string to a list of dictionaries
        List<Dictionary<string, string>> flavorList = JsonConvert.DeserializeObject<List<Dictionary<string, string>>>(jsonString);

        // Dictionary to store counts of each combination
        Dictionary<string, int> combinationCounts = new Dictionary<string, int>();

        // Count distinct combinations regardless of order
        foreach (var flavorCombo in flavorList)
        {
            // Sort the flavor names to ignore order
            var sortedCombo = flavorCombo.OrderBy(pair => pair.Value).Select(pair => pair.Value);
            string combination = string.Join(", ", sortedCombo);

            // Update combination count in the dictionary
            if (combinationCounts.ContainsKey(combination))
            {
                combinationCounts[combination]++;
            }
            else
            {
                combinationCounts[combination] = 1;
            }
        }

        int maxCombinationLength = flavorList.Max(flavorCombo => string.Join(", ", flavorCombo.OrderBy(pair => pair.Value).Select(pair => pair.Value)).Length);

        // Display the unique combinations and their counts in a table with borders
        Console.WriteLine($"+{new string('-', maxCombinationLength + 2)}+{new string('-', 13)}+");
        Console.WriteLine($"| COMBINATION{new string(' ', maxCombinationLength - "Combination".Length)} | TIMES EATEN |");
        Console.WriteLine($"+{new string('-', maxCombinationLength + 2)}+{new string('-', 13)}+");

        foreach (var kvp in combinationCounts)
        {
            Console.WriteLine($"| {kvp.Key,-20}{new string(' ', maxCombinationLength - kvp.Key.Length +1)}| {kvp.Value,11} |");
            Console.WriteLine($"+{new string('-', maxCombinationLength + 2)}+{new string('-', 13)}+");
        }

    }
}